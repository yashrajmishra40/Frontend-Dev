<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Q5 - College Timetable Viewer</title>
    <style>
      body {
        font-family: Arial;
        margin: 20px;
      }
      .class {
        padding: 8px;
        border-bottom: 1px solid #eee;
      }
    </style>
  </head>
  <body>
    <h2>College Timetable Viewer</h2>
    <label
      >Day:
      <select id="day">
        <option>Monday</option>
        <option>Tuesday</option>
        <option>Wednesday</option>
        <option>Thursday</option>
        <option>Friday</option>
        <option>Saturday</option>
      </select>
    </label>
    <div id="content">Select a day</div>

    <script>
      const API = "http://localhost:3005/timetable";
      document.getElementById("day").addEventListener("change", function () {
        const day = this.value;
        document.getElementById("content").textContent = "Loading...";
        fetch(API + "?day=" + encodeURIComponent(day))
          .then(function (r) {
            return r.json();
          })
          .then(function (data) {
            if (!data || data.length === 0) {
              document.getElementById("content").textContent =
                "No classes today.";
              return;
            }
            var html = data
              .map(function (c) {
                return (
                  '<div class="class"><strong>' +
                  c.subject +
                  "</strong> â€” " +
                  c.faculty +
                  "<br/><small>" +
                  c.time +
                  "</small></div>"
                );
              })
              .join("");
            document.getElementById("content").innerHTML = html;
          })
          .catch(function (err) {
            document.getElementById("content").textContent =
              "Error loading timetable";
          });
      });
      // initial load
      document.getElementById("day").dispatchEvent(new Event("change"));
    </script>
  </body>
</html>
